name: Build Clients

on:
    push

jobs:
    build-linux:
        runs-on: ubuntu-18.04
        steps:
            - name: install sbt
              run: |
                echo "deb https://dl.bintray.com/sbt/debian /" | sudo tee -a /etc/apt/sources.list.d/sbt.list
                curl -sL "https://keyserver.ubuntu.com/pks/lookup?op=get&search=0x2EE0EA64E40A89B84B2DF73499E82A75642AC823" | sudo apt-key add
                sudo apt-get update
                sudo apt-get install sbt
            - uses: actions/checkout@v1
            - name: build project
              run: |
                cd desktop-client
                sbt universal:packageBin
            - name: upload linux artifact
              uses: actions/upload-artifact@v1
              with:
                name: uploads
                path: desktop-client/target/universal/zumba-0.1.zip

    build-windows:
        runs-on: windows-2019
        steps:
            - uses: actions/checkout@v1
            - uses: olafurpg/setup-scala@v10
            - name: build windows binary
              run: |
                cd desktop-client
                sbt widows:packageBin
